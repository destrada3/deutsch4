<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subordinierende Konjunktionen - Aprende Alem√°n</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #eff6ff;
            --secondary: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1e293b;
            --gray: #64748b;
            --light: #f8fafc;
            --border: #e2e8f0;
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f1f5f9;
            color: var(--dark);
            line-height: 1.7;
            padding-bottom: 60px;
        }

        /* --- HEADER --- */
        .hero {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
            border-bottom: 5px solid var(--secondary);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: -0.5px;
            color: #ffffff;
        }

        .hero p {
            font-size: 1.25rem;
            color: #ffffff;
            opacity: 1;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            max-width: 600px;
            margin: 0 auto;
            font-weight: 400;
        }

        .container {
            max-width: 1000px;
            margin: -30px auto 0;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }

        /* --- CARDS & SECTIONS --- */
        .section-card {
            background: white;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }

        .section-title {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 25px;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 10px;
        }

        .section-title span {
            margin-right: 12px;
            font-size: 1.8rem;
        }

        h3 {
            color: #334155;
            font-size: 1.25rem;
            margin: 30px 0 15px;
        }

        p {
            margin-bottom: 15px;
            color: #475569;
        }

        /* --- BILINGUAL EXAMPLES --- */
        .example-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .example-box {
            display: flex;
            flex-direction: column;
            background: var(--light);
            border-left: 4px solid var(--primary);
            border-radius: 0 8px 8px 0;
            padding: 15px 20px;
            transition: transform 0.2s;
        }

        .example-box:hover {
            transform: translateX(5px);
            background: var(--primary-light);
        }

        .de-text {
            font-weight: 600;
            color: var(--dark);
            font-size: 1.05rem;
            margin-bottom: 5px;
        }

        .de-text span {
            color: var(--primary);
            background: #dbeafe;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .es-text {
            color: var(--gray);
            font-style: italic;
            font-size: 0.95rem;
        }

        @media (min-width: 768px) {
            .example-box {
                flex-direction: row;
                align-items: center;
            }
            .de-text { margin-bottom: 0; width: 50%; padding-right: 20px; border-right: 1px solid var(--border); }
            .es-text { width: 50%; padding-left: 20px; }
        }

        /* --- VOCABULARY GRID --- */
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .vocab-item {
            background: white;
            border: 1px solid var(--border);
            padding: 12px 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .vocab-item strong {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .vocab-item span {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* --- THEMATIC IMAGE --- */
        .thematic-image {
            width: 100%;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }
        .thematic-image img {
            width: 100%;
            display: block;
        }
        .thematic-image figcaption {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 0.9rem;
        }

        /* --- EXERCISES --- */
        .exercise-header {
            background: var(--primary-light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .question-block {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        .question-block:last-child {
            border-bottom: none;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 15px;
            color: var(--dark);
        }

        /* --- CUSTOM RADIO BUTTONS --- */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .custom-radio {
            position: relative;
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .custom-radio:hover {
            border-color: #93c5fd;
            background: #f8fafc;
        }

        .custom-radio input {
            display: none;
        }

        .radio-mark {
            width: 20px;
            height: 20px;
            border: 2px solid #cbd5e1;
            border-radius: 50%;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
        }

        .custom-radio input:checked ~ .radio-mark {
            border-color: var(--primary);
            background: var(--primary);
        }

        .custom-radio input:checked ~ .radio-mark::after {
            content: '';
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }

        .custom-radio input:checked ~ .radio-text {
            color: var(--primary);
            font-weight: 600;
        }

        .custom-radio:has(input:checked) {
            border-color: var(--primary);
            background: var(--primary-light);
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.1);
        }

        /* --- DIALOGUE / CHAT EXERCISE 2 --- */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            background: #fffbeb;
            border: 1px solid #fcd34d;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .word-pill {
            background: white;
            color: var(--secondary);
            font-weight: 600;
            padding: 6px 16px;
            border-radius: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border: 1px solid #fef3c7;
        }

        .chat-box {
            background: white;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-line {
            display: flex;
            align-items: baseline;
            gap: 15px;
            padding: 10px 15px;
            border-radius: 8px;
            background: #f8fafc;
        }

        .character {
            font-weight: 700;
            font-size: 0.95rem;
            min-width: 130px;
            text-align: right;
            border-right: 3px solid;
            padding-right: 15px;
        }

        .char-gretel { color: #d946ef; border-color: #d946ef; }
        .char-aschenputtel { color: #3b82f6; border-color: #3b82f6; }
        .char-gerdi { color: #10b981; border-color: #10b981; }
        .char-schneewittchen { color: #f43f5e; border-color: #f43f5e; }

        .inline-input {
            border: none;
            border-bottom: 2px dashed var(--gray);
            background: transparent;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
            text-align: center;
            width: 120px;
            padding: 2px 5px;
            margin: 0 5px;
            transition: all 0.3s;
            outline: none;
        }

        .inline-input:focus {
            border-bottom: 2px solid var(--primary);
            background: var(--primary-light);
        }

        /* --- SUBMIT BUTTON --- */
        .btn-submit {
            display: block;
            width: 100%;
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            padding: 18px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        /* --- MODAL --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 450px;
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: slideUp 0.4s ease-out forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-icon {
            font-size: 4rem;
            margin-bottom: 10px;
        }

        .score-display {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--dark);
            line-height: 1;
            margin-bottom: 20px;
        }

        .progress-bar-bg {
            width: 100%;
            height: 15px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            width: 0%;
            transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .verification-box {
            background: #f8fafc;
            border: 2px dashed #94a3b8;
            border-radius: 10px;
            padding: 15px;
            margin: 25px 0;
        }

        .verification-label {
            font-size: 0.85rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
            display: block;
        }

        .verification-code {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--dark);
            letter-spacing: 3px;
        }

        .btn-download {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            transition: 0.2s;
        }

        .btn-download:hover { background: #1d4ed8; }

        .btn-close {
            background: transparent;
            color: var(--gray);
            border: 1px solid var(--border);
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            transition: 0.2s;
        }

        .btn-close:hover { background: var(--light); color: var(--dark); }

    </style>
</head>
<body>

    <!-- Header / Hero Section -->
    <header class="hero">
        <h1>Subordinierende Konjunktionen</h1>
        <p>Aprende a usar las conjunciones subordinantes para unir cl√°usulas dependientes e independientes en alem√°n.</p>
    </header>

    <div class="container">
        <form id="quiz-form">
            
            <!-- SECCI√ìN DE TEOR√çA 1 -->
            <section class="section-card">
                <h2 class="section-title"><span>üìñ</span> Introducci√≥n</h2>
                <p>Las conjunciones subordinantes unen cl√°usulas desiguales: una independiente y otra dependiente.</p>

                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text">Der Vater musste seine Kinder wegschicken, <span>weil</span> er eine selbsts√ºchtige, zweite Frau hatte.</div>
                        <div class="es-text">El padre tuvo que alejar a sus hijos porque ten√≠a una segunda esposa ego√≠sta.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text"><span>Damit</span> sie mehr Essen f√ºr sich selbst haben k√∂nnten, bringen die Eltern die Kinder tief in den Wald.</div>
                        <div class="es-text">Para que ellos pudieran tener m√°s comida para s√≠ mismos, los padres se llevan a los ni√±os a lo m√°s profundo del bosque.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Ich h√§tte diese Frau rausgeschmissen, <span>wenn</span> ich zwischen meinen Kindern und ihr h√§tte w√§hlen m√ºssen.</div>
                        <div class="es-text">Habr√≠a echado a esa mujer si tuviera que haber elegido entre mis hijos y ella.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text"><span>Obwohl</span> die Geschichte ihr gew√∂hnliches Happy End hat, finde ich den Vater recht doof.</div>
                        <div class="es-text">Aunque la historia tiene su habitual final feliz, el padre me parece bastante tonto.</div>
                    </div>
                </div>

                <h3>Conjunciones m√°s utilizadas</h3>
                <p>Aunque existen varias conjunciones subordinantes m√°s, √©stas son las m√°s utilizadas:</p>
                
                <div class="vocab-grid">
                    <div class="vocab-item"><strong>als ob ...</strong> <span>como si</span></div>
                    <div class="vocab-item"><strong>obwohl</strong> <span>aunque</span></div>
                    <div class="vocab-item"><strong>bevor</strong> <span>antes</span></div>
                    <div class="vocab-item"><strong>ohne dass ...</strong> <span>sin que</span></div>
                    <div class="vocab-item"><strong>bis</strong> <span>ante (hasta)</span></div>
                    <div class="vocab-item"><strong>seitdem</strong> <span>desde ah√≠</span></div>
                    <div class="vocab-item"><strong>da</strong> <span>porque, ah√≠</span></div>
                    <div class="vocab-item"><strong>so dass ...</strong> <span>de forma que</span></div>
                    <div class="vocab-item"><strong>damit</strong> <span>para que</span></div>
                    <div class="vocab-item"><strong>sobald</strong> <span>tan pronto</span></div>
                    <div class="vocab-item"><strong>dass</strong> <span>que</span></div>
                    <div class="vocab-item"><strong>solange</strong> <span>mientras</span></div>
                    <div class="vocab-item"><strong>nachdem</strong> <span>despu√©s de</span></div>
                    <div class="vocab-item"><strong>w√§hrend</strong> <span>durante</span></div>
                    <div class="vocab-item"><strong>ob</strong> <span>si</span></div>
                    <div class="vocab-item"><strong>weil</strong> <span>porque</span></div>
                </div>
            </section>

            <!-- SECCI√ìN DE TEOR√çA 2 -->
            <section class="section-card">
                <h2 class="section-title"><span>üîç</span> Otros Grupos Frecuentes</h2>
                <p>Existen otros dos grupos de conjunciones subordinantes que se encuentran con frecuencia:</p>

                <h3>01. Palabras interrogativas</h3>
                <p>Pueden utilizarse en frases en las que una de las cl√°usulas era originalmente una pregunta.</p>
                <div class="vocab-grid" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));">
                    <div class="vocab-item" style="justify-content: center;"><strong>was</strong> (qu√©)</div>
                    <div class="vocab-item" style="justify-content: center;"><strong>wer</strong> (qui√©n)</div>
                    <div class="vocab-item" style="justify-content: center;"><strong>wie</strong> (c√≥mo)</div>
                    <div class="vocab-item" style="justify-content: center;"><strong>wo</strong> (d√≥nde)</div>
                    <div class="vocab-item" style="justify-content: center;"><strong>warum</strong> (por qu√©)</div>
                    <div class="vocab-item" style="justify-content: center;"><strong>usw.</strong></div>
                </div>

                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text">Wir finden wahrscheinlich nie heraus, <span>wie viele</span> andere Kinder die Hexe in ihrem Leben gegessen hat.</div>
                        <div class="es-text">Probablemente nunca sabremos a cu√°ntos ni√±os m√°s se comi√≥ la bruja en su vida.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Und <span>warum</span> sie so viel Geld in ihrem H√§uschen hat, kann sie auch nicht mehr sagen.</div>
                        <div class="es-text">Y porqu√© tiene tanto dinero en su casita, tampoco puede decir.</div>
                    </div>
                </div>

                <p style="margin-top: 20px;">Estas palabras interrogativas tambi√©n aparecen con frecuencia como conjunciones despu√©s de ciertas frases con verbos, por ejemplo, <strong>wissen</strong>, <strong>fragen</strong>, <strong>sagen</strong>, <strong>verstehen</strong> (entre otros).</p>

                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text">Ich wei√ü, <span>wo</span> die Hexe wohnt.</div>
                        <div class="es-text">Yo s√© d√≥nde vive la bruja.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Ich wei√ü aber nicht, <span>wie</span> ich dorthin komme.</div>
                        <div class="es-text">Pero no s√©, c√≥mo llegar hasta ah√≠.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Wer wei√ü, <span>warum</span> sie Kinder essen wollte.</div>
                        <div class="es-text">Qui√©n sabe, por qu√© ella quer√≠a comer ni√±os.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Ich frage (mich), <span>warum</span> sie keine Vegetarierin wurde!</div>
                        <div class="es-text">Me pregunto, por qu√© no se volvi√≥ vegetariana.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Wir verstehen nicht, <span>was</span> die Moral der Geschichte ist.</div>
                        <div class="es-text">No entendemos, cu√°l es la moraleja de la historia.</div>
                    </div>
                </div>

                <div class="thematic-image">
                    <img src="https://images.unsplash.com/photo-1448375240586-882707db888b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="">
                    <figcaption>Gretel gibt der Hexe einen Sto√ü, als sie ihren Kopf in den Backofen steckt.</figcaption>
                </div>

                <h3>02. als, wenn, wann</h3>
                <p>En espa√±ol existe una palabra para todas ellas, a saber, <em>cuando</em>. En alem√°n, sin embargo, estas tres palabras se utilizan en contextos diferentes.</p>
                
                <p><strong>Als:</strong> se refiere a un acontecimiento √∫nico en el pasado o a un acontecimiento √∫nico que sucede exactamente en el mismo momento que otro.</p>
                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text">Die Kinder waren noch wach, <span>als</span> die Stiefmutter dem Vater ihren schrecklichen Plan beschreibt.</div>
                        <div class="es-text">Los ni√±os a√∫n estaban despiertos cuando la madrastra describi√≥ su terrible plan al padre.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Gretel gibt der Hexe einen Sto√ü, <span>als</span> sie ihren Kopf in den Backofen steckt.</div>
                        <div class="es-text">Gretel le da un empuj√≥n a la bruja cuando ella met√≠a la cabeza en el horno.</div>
                    </div>
                </div>

                <p style="margin-top: 20px;"><strong>Wenn / Immer wenn:</strong> se refiere a instancias que pueden suceder o sucedieron repetidamente o eventos que est√°n sucediendo en el presente o suceder√°n en el futuro. Tambi√©n tiene el significado de 'si' como en un condicional (si quieres...).</p>
                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text"><span>Immer wenn</span> die Hexe wissen wollte, ob H√§nsel genug zugenommen hat, hat H√§nsel ihr statt seines Fingers immer nur ein Kn√∂chlein gereicht.</div>
                        <div class="es-text">Cada vez que la bruja quer√≠a saber si Hansel hab√≠a engordado lo suficiente, Hansel se limitaba a darle un huesito en lugar del dedo.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text"><span>Wenn</span> ihr die √úbung macht, findet ihr heraus, was H√§nsel und Gretel heutzutage machen.</div>
                        <div class="es-text">Si hacen el ejercicio, descubrir√°n qu√© hacen Hansel y Gretel hoy en d√≠a.</div>
                    </div>
                </div>

                <p style="margin-top: 20px;"><strong>Wann:</strong> s√≥lo se utiliza en preguntas y en preguntas indirectas. Como conjunci√≥n, siempre est√° en una pregunta indirecta, a menudo con una frase introductoria como 'Ich wei√ü nicht ...'.</p>
                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text">Die Kinder fragen ihren Vater, <span>wann</span> sie nach Hause kommen d√ºrfen.</div>
                        <div class="es-text">Los ni√±os preguntan a su padre cu√°ndo podr√°n volver a casa.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text">Sie m√∂chten auch wissen, <span>wann</span> sie die Hexe verlassen d√ºrfen, aber die Hexe meint nat√ºrlich, dass die Kinder ihr nie entkommen werden!</div>
                        <div class="es-text">Tambi√©n quieren saber cu√°ndo podr√°n dejar a la bruja, pero, por supuesto, ¬°la bruja piensa que los ni√±os nunca escapar√°n de ella!</div>
                    </div>
                </div>
            </section>

            <!-- SECCI√ìN DE TEOR√çA 3 -->
            <section class="section-card">
                <h2 class="section-title"><span>üèóÔ∏è</span> Orden de las palabras</h2>
                <p>Hay dos tipos de orden de palabras que debes ver con las conjunciones subordinantes:</p>
                
                <p><strong>01. Cl√°usula independiente primero, cl√°usula dependiente despu√©s.</strong> En este caso, el verbo conjugado en la oraci√≥n independiente est√° en segunda posici√≥n, mientras que el verbo conjugado en la oraci√≥n dependiente va al final de esa oraci√≥n.</p>
                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text">Gretel st√∂√üt die Hexe in den Backofen, <span>damit</span> sie ihren Bruder retten <strong>kann</strong>.</div>
                        <div class="es-text">Gretel empuja a la bruja al horno para poder salvar a su hermano.</div>
                    </div>
                </div>

                <p style="margin-top: 20px;"><strong>02. Cl√°usula dependiente primero, cl√°usula independiente despu√©s.</strong> En este caso, el verbo conjugado en la cl√°usula dependiente todav√≠a va al final de esa cl√°usula, pero el verbo conjugado en la cl√°usula independiente viene 'primero' (en realidad todav√≠a est√° en segunda posici√≥n, porque toda la cl√°usula dependiente llena el Vorfeld).</p>
                <div class="example-grid">
                    <div class="example-box">
                        <div class="de-text"><span>Weil</span> ihre Stiefmutter gestorben <strong>ist</strong>, d√ºrfen H√§nsel und Gretel zu Hause bleiben.</div>
                        <div class="es-text">Como su madrastra hab√≠a muerto, Hansel y Gretel pueden quedarse en casa.</div>
                    </div>
                    <div class="example-box">
                        <div class="de-text"><span>Wie</span> ein Vater seine Kinder wegschicken <strong>kann</strong>, um eine zweite Frau gl√ºcklich zu machen, werde ich nie verstehen.</div>
                        <div class="es-text">C√≥mo un padre puede enviar a sus hijos lejos para hacer feliz a una segunda esposa, nunca lo entender√©.</div>
                    </div>
                </div>
            </section>

            <!-- √úBUNG 1 -->
            <section class="section-card">
                <h2 class="section-title"><span>‚úçÔ∏è</span> √úbung 1</h2>
                <div class="exercise-header">
                    <p>¬øQu√© conjunci√≥n subordinante se ajusta mejor a la frase? Haz clic en la correcta y descubre en qu√© andan hoy H√§nsel y Gretel.</p>
                </div>

                <div class="question-block">
                    <div class="question-text">01. Die Kinder gehen nach Hause und sind sehr froh, ________ sie sehr reich sind.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q1" value="weil" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. weil</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q1" value="ob" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. ob</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">02. __________ sich keine Kinder verlieren, bauen sie einen Pfad von ihrem Haus zum Hexenhaus.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q2" value="Obwohl" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. Obwohl</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q2" value="Damit" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. Damit</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">03. Zuerst wissen sie nicht, __________ sie mit ihrem Geld machen sollen.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q3" value="wer" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. wer</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q3" value="was" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. was</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">04. __________ sie mit ihrem Vater wieder zusammen sind, sind sie gl√ºcklich.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q4" value="Sobald" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. Sobald</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q4" value="Solange" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. Solange</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">05. __________ sie aber 100 Jahre mit ihm zu Hause verbringen (desperdiciar), sehnen sie sich nach (a√±orar) einem modernen Leben.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q5" value="Nachdem" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. Nachdem</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q5" value="Bevor" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. Bevor</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">06. Sie verkaufen das Haus, __________ sie es dem Vater sagen.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q6" value="ohne dass" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. ohne dass</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q6" value="w√§hrend" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. w√§hrend</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">07. Die Kinder glauben, __________ er ihnen diese Chance schuldig ist (he owes them this chance).</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q7" value="warum" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. warum</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q7" value="dass" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. dass</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">08. __________ sie in ihre neue Wohnung einziehen, kaufen sie einen neuen K√ºhlschrank, neue M√∂bel und eine tolle Stereoanlage.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q8" value="Als" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. Als</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q8" value="wenn" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. wenn</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">09. Leider kann H√§nsel nur sehr wenig essen, und er hungert, __________ er fast stirbt!</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q9" value="solange" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. solange</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q9" value="bis" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. bis</span>
                        </label>
                    </div>
                </div>

                <div class="question-block">
                    <div class="question-text">10. Gretel fragt ihn, __________ er bereit ist (willing), einige neue Gerichte auszuprobieren.</div>
                    <div class="options-grid">
                        <label class="custom-radio">
                            <input type="radio" name="q10" value="ob" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">a. ob</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="q10" value="obwohl" class="trackable">
                            <div class="radio-mark"></div>
                            <span class="radio-text">b. obwohl</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- √úBUNG 2 -->
            <section class="section-card">
                <h2 class="section-title"><span>üí¨</span> √úbung 2</h2>
                <div class="exercise-header">
                    <p>Gretel no arriesg√≥ su vida para ver a su hermano consumirse... En una sesi√≥n de terapia, le aconsejan qu√© hacer. Rellena los espacios en blanco con una conjunci√≥n subordinante del banco de palabras para que las frases tengan sentido.</p>
                </div>

                <div class="word-bank">
                    <div class="word-pill">wie viele</div>
                    <div class="word-pill">da</div>
                    <div class="word-pill">bevor</div>
                    <div class="word-pill">obwohl</div>
                    <div class="word-pill">wie</div>
                    <div class="word-pill">warum</div>
                    <div class="word-pill">wen</div>
                    <div class="word-pill">was</div>
                    <div class="word-pill">als</div>
                    <div class="word-pill">dass</div>
                    <div class="word-pill">solange</div>
                    <div class="word-pill">weil</div>
                </div>

                <div class="chat-box">
                    <div class="chat-line">
                        <div class="character char-gretel">01. Gretel:</div>
                        <div class="chat-text">Ich wei√ü nicht, <input type="text" id="fb1" class="trackable inline-input" autocomplete="off"> ich tun soll! H√§nsel wird verhungern!</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-aschenputtel">02. Aschenputtel:</div>
                        <div class="chat-text">Hat er dir schon gesagt, <input type="text" id="fb2" class="trackable inline-input" autocomplete="off"> er nicht essen will oder kann?</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-gretel">03. Gretel:</div>
                        <div class="chat-text">Ja, aber er wei√ü es auch nicht. Ich kann dir nicht sagen, <input type="text" id="fb3" class="trackable inline-input" autocomplete="off"> verschiedene (diferentes) Gerichte ich schon gekocht habe: Italienisch, Japanisch, alles M√∂gliche!</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-gerdi">04. Gerdi:</div>
                        <div class="chat-text">Hat er genug gegessen, <input type="text" id="fb4" class="trackable inline-input" autocomplete="off"> ihr bei der Hexe wart?</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-gretel">05. Gretel:</div>
                        <div class="chat-text">Nat√ºrlich nicht, du wei√üt doch, <input type="text" id="fb5" class="trackable inline-input" autocomplete="off"> wir damals nicht genug zu essen hatten!</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-aschenputtel">06. Aschenputtel:</div>
                        <div class="chat-text"><input type="text" id="fb6" class="trackable inline-input" autocomplete="off"> das Essen f√ºr ihn eindeutig (claramente) traumatisch ist, muss er doch immer noch essen, um am Leben zu bleiben!</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-schneewittchen">07. Schneewittchen:</div>
                        <div class="chat-text">Was habt ihr gegessen, <input type="text" id="fb7" class="trackable inline-input" autocomplete="off"> ihr bei der Hexe wart?</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-gretel">08. Gretel:</div>
                        <div class="chat-text">Tolle Sachen, muss ich ehrlich sagen! <input type="text" id="fb8" class="trackable inline-input" autocomplete="off"> die Hexe ihn fett machen wollte, musste ich ihm die besten Speisen zubereiten (preparar).</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-gerdi">09. Gerdi:</div>
                        <div class="chat-text">Ach, ich wei√ü, <input type="text" id="fb9" class="trackable inline-input" autocomplete="off"> du ihm helfen kannst!</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-aschenputtel">10. Aschenputtel:</div>
                        <div class="chat-text">Ich auch! <input type="text" id="fb10" class="trackable inline-input" autocomplete="off"> du sein Essen kochst, isst er nicht!!!!</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-gretel">11. Gretel:</div>
                        <div class="chat-text">Oh nein! Er kann nicht essen, <input type="text" id="fb11" class="trackable inline-input" autocomplete="off"> ich bei der Hexe die K√∂chin war! Mein Kochen traumatisiert ihn!</div>
                    </div>
                    <div class="chat-line">
                        <div class="character char-gerdi">12. Gerdi:</div>
                        <div class="chat-text">Aber keine Sorge! Ihr seid super reich, oder? Und <input type="text" id="fb12" class="trackable inline-input" autocomplete="off"> ihr reich seid, k√∂nnt ihr jeden Tag etwas vom Restaurant bestellen!</div>
                    </div>
                </div>
            </section>

            <button type="button" class="btn-submit" onclick="evaluarRespuestas()">Evaluar Respuestas</button>
        </form>
    </div>

    <!-- Modal de Resultados -->
    <div id="result-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-icon">üéâ</div>
            <h2 style="color: var(--dark); margin-bottom: 5px;">¬°Excelente Trabajo!</h2>
            <p style="color: var(--gray); margin-bottom: 20px;">Aqu√≠ tienes tus resultados finales.</p>
            
            <div class="score-display" id="score-percentage">0%</div>
            
            <div class="progress-bar-bg">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <p style="font-size: 1.1rem; color: var(--dark);">Respuestas Correctas: <strong><span id="correct-count">0</span>/22</strong></p>
            
            <div class="verification-box">
                <span class="verification-label">C√≥digo de Verificaci√≥n</span>
                <div class="verification-code" id="verification-code">000-0000</div>
            </div>
            
            <p style="font-size: 0.85rem; color: var(--gray); margin-bottom: 20px; background: var(--light); padding: 10px; border-radius: 8px;">
                üì∏ Toma un screenshot de esta pantalla y descarga tu comprobante para entregarlo.
            </p>
            
            <button type="button" class="btn-download" onclick="descargarComprobante()">üì• Descargar Archivo .txt</button>
            <button type="button" class="btn-close" onclick="document.getElementById('result-modal').style.display='none'">Cerrar</button>
        </div>
    </div>

    <script>
        // --- VARIABLES DEL SISTEMA ANTITRAMPAS ---
        let integrityData = {
            pasteEvents: 0,
            focusChanges: 0,
            keyStrokes: 0,
            backspaces: 0,
            rapidFillCount: 0,
            startTime: Date.now(),
            lastInputTime: Date.now(),
            sequence: [],
            flags: [],
            humanScore: 100,
            riskLevel: 'low',
            totalAnswers: 22
        };

        // Respuestas correctas
        const answers = {
            q1: 'weil', q2: 'Damit', q3: 'was', q4: 'Solange', q5: 'Nachdem', 
            q6: 'ohne dass', q7: 'dass', q8: 'Als', q9: 'bis', q10: 'ob',
            fb1: 'was', fb2: 'warum', fb3: 'wie viele', fb4: 'als', fb5: 'dass', 
            fb6: 'obwohl', fb7: 'als', fb8: 'da', fb9: 'wie', fb10: 'solange', 
            fb11: 'weil', fb12: 'weil'
        };

        let resultStats = { correct: 0, total: 22, score: 0, finalCode: "" };

        // --- LISTENERS DE INTEGRIDAD ---

        // 1. Cambios de Ventana
        window.addEventListener('blur', () => { integrityData.focusChanges++; });

        // Rastrear inputs y campos de texto
        document.querySelectorAll('.trackable').forEach((elem, index) => {
            // 2. Eventos de pegar
            elem.addEventListener('paste', () => { integrityData.pasteEvents++; });

            elem.addEventListener('input', (e) => {
                // Contar teclas y backspaces
                integrityData.keyStrokes++;
                if (e.inputType === 'deleteContentBackward') integrityData.backspaces++;
            });

            elem.addEventListener('change', () => {
                let now = Date.now();
                let timeDiff = now - integrityData.lastInputTime;
                
                // 3. Llenado r√°pido (< 500ms)
                if (timeDiff < 500) integrityData.rapidFillCount++;
                
                // 4. Secuencia
                if (!integrityData.sequence.includes(index)) {
                    integrityData.sequence.push(index);
                }
                integrityData.lastInputTime = now;
            });
        });

        // --- FUNCI√ìN DE EVALUACI√ìN Y C√ÅLCULO DE INTEGRIDAD ---
        function evaluarRespuestas() {
            let correctas = 0;

            // Validar Ejercicio 1 (Radios)
            for(let i=1; i<=10; i++) {
                let radios = document.getElementsByName('q'+i);
                for(let radio of radios) {
                    if(radio.checked && radio.value === answers['q'+i]) {
                        correctas++;
                    }
                }
            }

            // Validar Ejercicio 2 (Inputs texto)
            for(let i=1; i<=12; i++) {
                let inputVal = document.getElementById('fb'+i).value.trim().toLowerCase();
                let correctAns = answers['fb'+i].toLowerCase().replace("_", " ");
                
                // Aceptar alternativas v√°lidas
                if(inputVal === correctAns || (i===8 && inputVal==='weil') || (i===10 && inputVal==='wenn') || (i===12 && inputVal==='da')) {
                    correctas++;
                }
            }

            // C√°lculo de tiempos
            let totalTimeMs = Date.now() - integrityData.startTime;
            let avgTime = totalTimeMs / integrityData.totalAnswers;

            // Aplicar Penalizaciones de Integridad
            if(integrityData.pasteEvents > 5) { integrityData.humanScore -= 25; integrityData.flags.push('excessive_paste'); }
            if(integrityData.focusChanges > 10) { integrityData.humanScore -= 15; integrityData.flags.push('frequent_tab_switching'); }
            if(integrityData.rapidFillCount > 8) { integrityData.humanScore -= 30; integrityData.flags.push('rapid_fill_pattern'); }
            if(avgTime < 2000 && integrityData.sequence.length > 10) { integrityData.humanScore -= 25; integrityData.flags.push('unrealistic_speed'); }
            
            let backspaceRatio = integrityData.keyStrokes > 0 ? (integrityData.backspaces / integrityData.keyStrokes) : 0;
            if(backspaceRatio < 0.02 && integrityData.keyStrokes > 15) { integrityData.humanScore -= 20; integrityData.flags.push('no_corrections'); }

            // Comprobar patr√≥n secuencial perfecto (1, 2, 3...)
            let isPerfectSequence = true;
            for(let i=0; i<integrityData.sequence.length; i++) {
                if(integrityData.sequence[i] !== i) isPerfectSequence = false;
            }
            if(isPerfectSequence && integrityData.sequence.length > 15) {
                integrityData.humanScore -= 15;
                integrityData.flags.push('perfect_sequence');
            }

            // Normalizar score y asignar nivel de riesgo
            integrityData.humanScore = Math.max(0, integrityData.humanScore);
            
            let riskDigit = '0';
            if(integrityData.humanScore >= 70) { integrityData.riskLevel = 'low'; riskDigit = '0'; }
            else if(integrityData.humanScore >= 40) { integrityData.riskLevel = 'medium'; riskDigit = '1'; }
            else { integrityData.riskLevel = 'high'; riskDigit = '2'; }

            // Generar C√≥digo de Verificaci√≥n: ABC-DEFGH
            let abc = String(integrityData.humanScore).padStart(3, '0');
            let timestampStr = String(Date.now());
            let efgh = timestampStr.substring(timestampStr.length - 4);
            resultStats.finalCode = `${abc}-${riskDigit}${efgh}`;

            // Mostrar Resultados Visuales
            let scorePercent = Math.round((correctas / 22) * 100);
            resultStats.correct = correctas;
            resultStats.score = scorePercent;

            document.getElementById('score-percentage').innerText = scorePercent + '%';
            
            // Animaci√≥n suave de la barra de progreso
            setTimeout(() => {
                document.getElementById('progress-fill').style.width = scorePercent + '%';
            }, 100);
            
            document.getElementById('correct-count').innerText = correctas;
            document.getElementById('verification-code').innerText = resultStats.finalCode;
            
            document.getElementById('result-modal').style.display = 'flex';
        }

        // --- GENERACI√ìN DE ARCHIVO DE TEXTO ---
        function descargarComprobante() {
            let dateStr = new Date().toLocaleString();
            let totalSecs = Math.round((Date.now() - integrityData.startTime) / 1000);
            let avgTimeMs = Math.round((Date.now() - integrityData.startTime) / integrityData.totalAnswers);

            let content = `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë               RESULTADOS DE EVALUACI√ìN                 ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

Fecha y Hora:                 ${dateStr}
Tema:                         Subordinierende Konjunktionen
Calificaci√≥n Obtenida:        ${resultStats.score}%
Respuestas Correctas:         ${resultStats.correct}/${resultStats.total}

C√≥digo de Verificaci√≥n:       ${resultStats.finalCode}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    DATOS DE INTEGRIDAD (USO DOCENTE)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Puntuaci√≥n de Integridad:     ${integrityData.humanScore}/100
Nivel de Riesgo:              ${integrityData.riskLevel}
Tiempo Total:                 ${totalSecs} segundos
Tiempo Promedio/Pregunta:     ${avgTimeMs} ms
Eventos de Pegar:             ${integrityData.pasteEvents}
Cambios de Ventana:           ${integrityData.focusChanges}

Indicadores detectados:       ${integrityData.flags.length > 0 ? integrityData.flags.join(', ') : 'Ninguno'}

* Documento Autogenerado por Sistema de Autoevaluaci√≥n.
`;
            const blob = new Blob([content], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Resultados_Konjunktionen_${new Date().getTime()}.txt`;
            link.click();
        }
    </script>

</body>
</html>
