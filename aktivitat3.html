<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test fÃ¼r Lektion 1 und 2 - Sistema Autoevaluable</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --bg: #f5f7fa;
            --container-bg: #ffffff;
            --text: #34495e;
            --border: #e0e0e0;
            --success: #27ae60;
            --error: #c0392b;
            --warning: #f39c12;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
            margin: 0;
            user-select: none; /* ANTITRAMPAS: Evita selecciÃ³n de texto */
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--container-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 20px;
        }

        h1 { color: var(--primary); margin: 0; font-size: 2.2em; }
        h2 { color: var(--accent); font-size: 1.2em; font-weight: 500; }

        .student-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .input-group { display: flex; flex-direction: column; }
        .input-group label { font-weight: bold; font-size: 0.9em; margin-bottom: 5px; color: var(--primary); }
        .input-group input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; }

        .exercise {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
        }
        
        .exercise-badge {
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            display: inline-block;
            margin-bottom: 10px;
        }

        h3 { margin-top: 0; color: var(--primary); }
        p.instruction { font-style: italic; color: #7f8c8d; font-size: 0.95em; margin-bottom: 20px; }

        /* Estilos Inputs Texto */
        input.answer-input {
            border: none;
            border-bottom: 2px solid #bdc3c7;
            background: transparent;
            padding: 5px 0px;
            font-family: inherit;
            width: 100%;
            transition: all 0.3s;
            font-size: 1em;
            color: var(--primary);
        }
        input.answer-input:focus { outline: none; border-bottom-color: var(--accent); }

        /* CARDS EJERCICIO 1 */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .question-card {
            background: #ffffff;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #eef2f7;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .question-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
            border-color: var(--accent);
        }

        .card-icon {
            font-size: 2em;
            background: #f0f4f8;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .prompt {
            font-size: 0.85em;
            color: #95a5a6;
            margin-bottom: 2px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .example-pill {
            background: #eef2f3;
            padding: 2px 8px;
            border-radius: 4px;
        }

        /* Estilos Radio Buttons */
        .radio-option {
            display: block;
            margin: 8px 0;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .radio-option:hover { background: #f0f0f0; }

        /* DRAG AND DROP STYLES */
        .drag-area {
            background: #f8f9fa;
            border: 2px dashed #bdc3c7;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            min-height: 50px;
            padding: 10px;
            background: #eef2f3;
            border-radius: 6px;
        }

        .word-item {
            background-color: var(--accent);
            color: white;
            padding: 8px 14px;
            border-radius: 20px;
            cursor: grab;
            font-size: 0.9em;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            user-select: none;
        }
        .word-item:active { cursor: grabbing; transform: scale(0.98); }

        .drop-zone {
            min-height: 60px;
            background: #fff;
            border: 2px solid var(--accent);
            border-radius: 6px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 8px;
        }
        
        .drop-zone.hovered { background-color: #eafaf1; border-style: dashed; }

        /* Dropzone para Ejercicio 6 */
        .ex6-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px;
            background: #fff;
            border: 1px solid #eee;
            border-radius: 6px;
        }

        .ex6-row strong { font-size: 1.1em; width: 100px; }

        .drop-zone-single {
            min-height: 40px;
            min-width: 150px;
            border: 2px dashed var(--accent);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fbfbfb;
            padding: 5px;
        }

        /* Selects del Ejercicio 4 */
        select.syntax-select {
            padding: 8px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            color: var(--primary);
            font-weight: 500;
        }

        /* EVALUACIÃ“N */
        .evaluation-section {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid var(--border);
        }

        button#submit-btn {
            background-color: var(--success);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button#submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            background-color: #219150;
        }

        #result-display {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            display: none;
        }
        #penalty-warning {
            font-size: 0.6em;
            color: var(--error);
            font-weight: normal;
            display: block;
            margin-top: 10px;
        }

        /* Feedback visual */
        .correct-bg { background-color: #d4edda !important; border-color: #c3e6cb !important; }
        .incorrect-bg { background-color: #f8d7da !important; border-color: #f5c6cb !important; }
        
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Test fÃ¼r Lektion 1 und 2</h1>
        <h2>(46 Punkte gesamt)</h2>
    </header>

    <div class="exercise">
        <span class="exercise-badge">10 Puntos</span>
        <h3>1. ErgÃ¤nzen Sie. (Adjetivos)</h3>
        <p class="instruction">Ejemplo: <span class="example-pill">ðŸ‘ž ein Schuh / klein</span> âž” <strong>ein kleiner Schuh</strong></p>
        
        <div class="cards-grid">
            <div class="question-card"><div class="card-icon">ðŸ‘„</div><div class="card-content"><span class="prompt">der Mund / schmal</span><input type="text" class="answer-input ex1" data-ans="der schmale mund" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ‘š</div><div class="card-content"><span class="prompt">eine Bluse / grau</span><input type="text" class="answer-input ex1" data-ans="eine graue bluse" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ’¼</div><div class="card-content"><span class="prompt">der Beruf / interessant</span><input type="text" class="answer-input ex1" data-ans="der interessante beruf" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ‘—</div><div class="card-content"><span class="prompt">ein Kleid / blau</span><input type="text" class="answer-input ex1" data-ans="ein blaues kleid" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ‘£</div><div class="card-content"><span class="prompt">die FÃ¼ÃŸe / groÃŸ</span><input type="text" class="answer-input ex1" data-ans="die groÃŸen fÃ¼ÃŸe" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ“„</div><div class="card-content"><span class="prompt">ein Zeugnis / gut</span><input type="text" class="answer-input ex1" data-ans="ein gutes zeugnis" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸŽ“</div><div class="card-content"><span class="prompt">die Studenten / intelligent</span><input type="text" class="answer-input ex1" data-ans="die intelligenten studenten" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ§‘</div><div class="card-content"><span class="prompt">das Gesicht / hÃ¼bsch</span><input type="text" class="answer-input ex1" data-ans="das hÃ¼bsche gesicht" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ“»</div><div class="card-content"><span class="prompt">ein Radio / billig</span><input type="text" class="answer-input ex1" data-ans="ein billiges radio" placeholder="Escribe aquÃ­..."></div></div>
            <div class="question-card"><div class="card-icon">ðŸ‘–</div><div class="card-content"><span class="prompt">die Hose / weiÃŸ</span><input type="text" class="answer-input ex1" data-ans="die weiÃŸe hose" placeholder="Escribe aquÃ­..."></div></div>
        </div>
    </div>

    <div class="exercise">
        <span class="exercise-badge">7 Puntos</span>
        <h3>2. Was ist richtig? (SelecciÃ³n)</h3>
        <div style="display: grid; grid-template-columns: 1fr; gap: 10px;">
            <div class="radio-group-container"><strong>b)</strong> Er trÃ¤gt eine _________ Krawatte. <div style="margin-left: 20px;"><label class="radio-option"><input type="radio" name="ex2_b" value="schwarz"> schwarz</label><label class="radio-option"><input type="radio" name="ex2_b" value="schwarze" data-correct="true"> schwarze</label><label class="radio-option"><input type="radio" name="ex2_b" value="schwarzen"> schwarzen</label></div></div>
            <div class="radio-group-container"><strong>c)</strong> Sie trÃ¤gt ein _________ Kleid. <div style="margin-left: 20px;"><label class="radio-option"><input type="radio" name="ex2_c" value="roten"> roten</label><label class="radio-option"><input type="radio" name="ex2_c" value="roter"> roter</label><label class="radio-option"><input type="radio" name="ex2_c" value="rotes" data-correct="true"> rotes</label></div></div>
            <div class="radio-group-container"><strong>d)</strong> Sie hat einen _________ Kollegen. <div style="margin-left: 20px;"><label class="radio-option"><input type="radio" name="ex2_d" value="netten" data-correct="true"> netten</label><label class="radio-option"><input type="radio" name="ex2_d" value="nette"> nette</label><label class="radio-option"><input type="radio" name="ex2_d" value="nett"> nett</label></div></div>
            <div class="radio-group-container"><strong>e)</strong> Sie trÃ¤gt eine _________ Brille. <div style="margin-left: 20px;"><label class="radio-option"><input type="radio" name="ex2_e" value="runden"> runden</label><label class="radio-option"><input type="radio" name="ex2_e" value="rund"> rund</label><label class="radio-option"><input type="radio" name="ex2_e" value="runde" data-correct="true"> runde</label></div></div>
            <div class="radio-group-container"><strong>f)</strong> Mein Vater trÃ¤gt immer _________ Schuhe. <div style="margin-left: 20px;"><label class="radio-option"><input type="radio" name="ex2_f" value="braunen"> braunen</label><label class="radio-option"><input type="radio" name="ex2_f" value="braune" data-correct="true"> braune</label><label class="radio-option"><input type="radio" name="ex2_f" value="braunes"> braunes</label></div></div>
            <div class="radio-group-container"><strong>g)</strong> Ich habe einen _________ Chef. <div style="margin-left: 20px;"><label class="radio-option"><input type="radio" name="ex2_g" value="freundliches"> freundliches</label><label class="radio-option"><input type="radio" name="ex2_g" value="freundliche"> freundliche</label><label class="radio-option"><input type="radio" name="ex2_g" value="freundlichen" data-correct="true"> freundlichen</label></div></div>
            <div class="radio-group-container"><strong>h)</strong> Peter hat eine _________ Freundin. <div style="margin-left: 20px;"><label class="radio-option"><input type="radio" name="ex2_h" value="neue" data-correct="true"> neue</label><label class="radio-option"><input type="radio" name="ex2_h" value="neues"> neues</label><label class="radio-option"><input type="radio" name="ex2_h" value="neuen"> neuen</label></div></div>
        </div>
    </div>

    <div class="exercise">
        <span class="exercise-badge">5 Puntos</span>
        <h3>3. Ordnen Sie. (Arrastrar y Soltar)</h3>
        <p class="instruction">Arrastra las palabras para formar la oraciÃ³n correcta.</p>

        <div class="drag-area" id="area-b">
            <strong>b)</strong> 
            <div class="word-bank" ondrop="drop(event)" ondragover="allowDrop(event)">
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_1">Weil</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_2">er</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_3">Tiere</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_4">mag,</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_5">mÃ¶chte</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_6">Peter</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_7">Zoodirektor</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wb_8">werden.</span>
            </div>
            <div class="drop-zone target" data-ans="wb_1,wb_6,wb_3,wb_4,wb_5,wb_2,wb_7,wb_8" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>

        <div class="drag-area" id="area-c">
            <strong>c)</strong>
            <div class="word-bank" ondrop="drop(event)" ondragover="allowDrop(event)">
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wc_1">Paul will NachtwÃ¤chter werden,</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wc_2">weil</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wc_3">er</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wc_4">nachts</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wc_5">arbeiten</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wc_6">mÃ¶chte.</span>
            </div>
            <div class="drop-zone target" data-ans="wc_1,wc_2,wc_3,wc_4,wc_5,wc_6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>
        
        <div class="drag-area" id="area-d">
            <strong>d)</strong>
            <div class="word-bank" ondrop="drop(event)" ondragover="allowDrop(event)">
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wd_1">Florian muss Fotomodell werden,</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wd_2">denn</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wd_3">seine</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wd_4">Eltern</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wd_5">haben</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wd_6">einen</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wd_7">Bauernhof.</span>
            </div>
            <div class="drop-zone target" data-ans="wd_1,wd_2,wd_3,wd_4,wd_5,wd_6,wd_7" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>

        <div class="drag-area" id="area-e">
            <strong>e)</strong>
            <div class="word-bank" ondrop="drop(event)" ondragover="allowDrop(event)">
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="we_1">Werner ist mit seinem Beruf unzufrieden,</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="we_2">obwohl</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="we_3">er</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="we_4">viel</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="we_5">Geld</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="we_6">verdient.</span>
            </div>
            <div class="drop-zone target" data-ans="we_1,we_2,we_3,we_4,we_5,we_6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>
        
        <div class="drag-area" id="area-f">
            <strong>f)</strong>
            <div class="word-bank" ondrop="drop(event)" ondragover="allowDrop(event)">
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wf_1">Weil</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wf_2">er</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wf_3">einen</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wf_4">Unfall</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wf_5">hatte,</span>
                <span class="word-item" draggable="true" ondragstart="drag(event)" id="wf_6">konnte Werner nicht mehr als Maurer arbeiten.</span>
            </div>
            <div class="drop-zone target" data-ans="wf_1,wf_2,wf_3,wf_4,wf_5,wf_6" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>
    </div>

    <div class="exercise">
        <span class="exercise-badge">5 Puntos</span>
        <h3>4. PosiciÃ³n del pronombre "er".</h3>
        <p class="instruction">Â¿El pronombre "er" va ANTES o DESPUÃ‰S del verbo conjugado? Analiza la estructura de la oraciÃ³n.</p>
        
        <div style="display: grid; gap: 20px;">
            <div><strong>b)</strong> ... Aber <select class="syntax-select" data-ans="antes"><option value="">?</option><option value="antes">er will</option><option value="despues">will er</option></select> die Schule verlassen.</div>
            <div><strong>c)</strong> ... Denn <select class="syntax-select" data-ans="antes"><option value="">?</option><option value="antes">er will</option><option value="despues">will er</option></select> lieber arbeiten.</div>
            <div><strong>d)</strong> ... Deshalb <select class="syntax-select" data-ans="despues"><option value="">?</option><option value="antes">er will</option><option value="despues">will er</option></select> die Schule verlassen.</div>
            <div><strong>e)</strong> ... Aber <select class="syntax-select" data-ans="antes"><option value="">?</option><option value="antes">er bekommt</option><option value="despues">bekommt er</option></select> kein Abschlusszeugnis.</div>
            <div><strong>f)</strong> ... dann <select class="syntax-select" data-ans="despues"><option value="">?</option><option value="antes">er hat</option><option value="despues">hat er</option></select> bessere Chancen im Beruf.</div>
        </div>
    </div>

    <div class="exercise">
        <span class="exercise-badge">10 Puntos</span>
        <h3>5. ErgÃ¤nzen Sie die Form im PrÃ¤teritum.</h3>
        <p class="instruction">Ejemplo: ich darf âž” <strong>ich durfte</strong></p>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <div>b) er will âž” <input type="text" class="answer-input ex5" data-ans="er wollte"></div>
            <div>g) sie wollen âž” <input type="text" class="answer-input ex5" data-ans="sie wollten"></div>
            <div>c) sie kÃ¶nnen âž” <input type="text" class="answer-input ex5" data-ans="sie konnten"></div>
            <div>h) du darfst âž” <input type="text" class="answer-input ex5" data-ans="du durftest"></div>
            <div>d) ihr sollt âž” <input type="text" class="answer-input ex5" data-ans="ihr solltet"></div>
            <div>i) sie dÃ¼rfen âž” <input type="text" class="answer-input ex5" data-ans="sie durften"></div>
            <div>e) wir mÃ¼ssen âž” <input type="text" class="answer-input ex5" data-ans="wir mussten"></div>
            <div>j) du willst âž” <input type="text" class="answer-input ex5" data-ans="du wolltest"></div>
            <div>f) du kannst âž” <input type="text" class="answer-input ex5" data-ans="du konntest"></div>
            <div>k) er soll âž” <input type="text" class="answer-input ex5" data-ans="er sollte"></div>
        </div>
    </div>

    <div class="exercise">
        <span class="exercise-badge">9 Puntos</span>
        <h3>6. Wie heiÃŸt das Gegenteil?</h3>
        <p class="instruction">Arrastra el antÃ³nimo correcto desde el banco de palabras y suÃ©ltalo junto a su opuesto.</p>
        
        <div style="display: flex; flex-wrap: wrap; gap: 30px;">
            
            <div style="flex: 1; min-width: 250px;">
                <div class="ex6-row"><strong>nett</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_unsympathisch" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>klug</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_dumm" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>schÃ¶n</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_hasslich" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>sauber</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_schmutzig" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>alt</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_jung" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>traurig</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_lustig" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>nervÃ¶s</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_ruhig" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>interessant</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_langweilig" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
                <div class="ex6-row"><strong>leicht</strong> âž” <div class="drop-zone drop-zone-single target-ex6" data-ans="op_schwer" ondrop="drop(event)" ondragover="allowDrop(event)"></div></div>
            </div>

            <div style="flex: 1;">
                <div class="word-bank" ondrop="drop(event)" ondragover="allowDrop(event)" style="align-content: flex-start;">
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_langweilig">langweilig</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_ruhig">ruhig</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_dunn">dÃ¼nn</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_schwer">schwer</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_lustig">lustig</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_unsympathisch">unsympathisch</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_dumm">dumm</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_jung">jung</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_hasslich">hÃ¤sslich</span>
                    <span class="word-item" draggable="true" ondragstart="drag(event)" id="op_schmutzig">schmutzig</span>
                </div>
            </div>

        </div>
    </div>

    <div class="evaluation-section">
        <button id="submit-btn" onclick="evaluateTest()">Entregar y Evaluar</button>
        <div id="result-display"></div>
    </div>

</div>

<script>
    // --- LÃ“GICA ANTITRAMPAS SILENCIOSA ---
    let penalizaciones = 0;

    // Bloqueo de clic derecho
    document.addEventListener('contextmenu', event => event.preventDefault());
    
    // Sumar 1 falta si intenta copiar
    document.addEventListener('copy', event => { 
        event.preventDefault(); 
        penalizaciones += 1;
    });
    
    // Sumar 1 falta si intenta pegar
    document.addEventListener('paste', event => { 
        event.preventDefault(); 
        penalizaciones += 1;
    });

    // Sumar 1 falta por cada vez que abandona la pestaÃ±a/ventana
    document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'hidden') {
            penalizaciones += 1;
        }
    });

    // --- LÃ“GICA DRAG & DROP ---
    function allowDrop(ev) { ev.preventDefault(); ev.target.classList.add('hovered'); }
    function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }
    
    function drop(ev) {
        ev.preventDefault();
        ev.target.classList.remove('hovered');
        var data = ev.dataTransfer.getData("text");
        var draggedElement = document.getElementById(data);
        
        let dropTarget = ev.target;

        if (dropTarget.classList.contains('drop-zone') || dropTarget.classList.contains('word-bank')) {
            // Regla opcional para Ex6: Permitir un solo elemento en las cajas, 
            // pero si tiran varios, la evaluaciÃ³n solo leerÃ¡ el primero.
            dropTarget.appendChild(draggedElement);
        } else if (dropTarget.classList.contains('word-item')) {
            // Si lo suelta encima de otra palabra, lo manda a la caja de esa palabra
            dropTarget.parentElement.appendChild(draggedElement);
        }
    }

    // --- LÃ“GICA DE EVALUACIÃ“N ---
    function evaluateTest() {
        let score = 0;
        let total = 46;

        // 1. Text Inputs (Ex 1 & 5)
        document.querySelectorAll('.answer-input').forEach(input => {
            let correct = input.getAttribute('data-ans').toLowerCase();
            let userAns = input.value.trim().toLowerCase();
            if(userAns === correct) {
                score++;
                input.classList.remove('incorrect-bg');
                input.classList.add('correct-bg');
            } else {
                input.classList.remove('correct-bg');
                input.classList.add('incorrect-bg');
            }
        });

        // 2. Radio Buttons (Ex 2)
        const radioGroups = ['ex2_b', 'ex2_c', 'ex2_d', 'ex2_e', 'ex2_f', 'ex2_g', 'ex2_h'];
        radioGroups.forEach(group => {
            const selected = document.querySelector(`input[name="${group}"]:checked`);
            if(selected) {
                if(selected.getAttribute('data-correct') === 'true') {
                    score++;
                    selected.parentElement.style.color = '#27ae60';
                    selected.parentElement.style.fontWeight = 'bold';
                } else {
                    selected.parentElement.style.color = '#c0392b';
                }
            }
        });

        // 3. Drag & Drop (Ex 3)
        document.querySelectorAll('.target').forEach(zone => {
            const correctOrder = zone.getAttribute('data-ans').split(',');
            const currentIds = Array.from(zone.children).map(child => child.id);
            
            const isCorrect = JSON.stringify(correctOrder) === JSON.stringify(currentIds);
            
            if(isCorrect) {
                score++;
                zone.classList.remove('incorrect-bg');
                zone.classList.add('correct-bg');
            } else {
                zone.classList.remove('correct-bg');
                zone.classList.add('incorrect-bg');
            }
        });

        // 4. Selects (Ex 4)
        document.querySelectorAll('.syntax-select').forEach(select => {
            if(select.value === select.getAttribute('data-ans')) {
                score++;
                select.style.borderColor = '#27ae60';
                select.style.borderWidth = '2px';
            } else {
                select.style.borderColor = '#c0392b';
                select.style.borderWidth = '2px';
            }
        });

        // 5. Drag & Drop Individual (Ex 6)
        document.querySelectorAll('.target-ex6').forEach(zone => {
            const correctAnswerId = zone.getAttribute('data-ans');
            
            // Verificamos si tiene un elemento dentro y si su ID coincide
            if(zone.firstElementChild && zone.firstElementChild.id === correctAnswerId) {
                score++;
                zone.style.borderColor = '#27ae60';
                zone.style.backgroundColor = '#d4edda';
            } else {
                zone.style.borderColor = '#c0392b';
                zone.style.backgroundColor = '#f8d7da';
            }
        });

        // CÃ¡lculo Final aplicando penalizaciones
        let finalScore = score - penalizaciones;
        if (finalScore < 0) finalScore = 0; // Evitar puntuaciones negativas extremas

        // Mostrar Resultado
        const display = document.getElementById('result-display');
        display.style.display = 'block';
        
        let penaltyMessage = "";
        if (penalizaciones > 0) {
            penaltyMessage = `<span id="penalty-warning">Se han restado ${penalizaciones} puntos de tu calificaciÃ³n por cambiar de pestaÃ±a o usar el portapapeles.</span>`;
        }

        display.innerHTML = `Tu CalificaciÃ³n: ${finalScore} / ${total} <br> ${penaltyMessage}`;
        display.style.color = finalScore >= 23 ? 'var(--success)' : 'var(--error)';
        
        // Hacer Scroll al resultado final
        display.scrollIntoView({behavior: "smooth"});
    }
</script>

</body>
</html>
